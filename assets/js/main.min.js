var br=br||{};br.App=function(){var e=this;return e.el={doc:$(document)},e.initialize=function(){e.piano=new br.Piano,e.console=new br.Console,e.player=new br.Player,e.el.doc.keypress(e.docKeyPressed),e.piano.el.key.click(e.keyClicked),e.console.el.clear.click(e.clearClicked),e.player.el.input.keypress(e.inputKeyPressed),e.player.el.button.click(e.playClicked)},e.docKeyPressed=function(t){var n=t.which,r=String.fromCharCode(n);e.pressKey(r)},e.keyClicked=function(t){var n=$(t.target),r=n.data("key");e.pressKey(r)},e.clearClicked=function(t){t.preventDefault(),e.console.clear()},e.inputKeyPressed=function(e){e.stopPropagation()},e.playClicked=function(t){var n=e.player.el.input.val(),r=n.toLowerCase().split(","),i=0;if(n==="")return;e.player.disable(),e.pressKey(r[i]);var s=setInterval(function(){i++;if(i===r.length){clearInterval(s),e.player.enable();return}e.pressKey(r[i])},1e3)},e.pressKey=function(t){e.piano.el.content.find('.white_key[data-key="'+t+'"]').length>0?(e.piano.pressKey(t),e.piano.sounds[t].play(),e.console.add(t)):e.piano.sounds._.play()},e.initialize(),e},br.Piano=function(){var e=this;return e.el={content:$("#piano"),key:$(".white_key")},e.sounds={a:new Audio("assets/wav/accordion.wav"),b:new Audio("assets/wav/bell.wav"),c:new Audio("assets/wav/clap.wav"),d:new Audio("assets/wav/duck.wav"),e:new Audio("assets/wav/elephant.wav"),f:new Audio("assets/wav/fart.wav"),g:new Audio("assets/wav/goat.wav"),_:new Audio("assets/wav/_.wav")},e.pressKey=function(t){var n=e.el.content.find('.white_key[data-key="'+t+'"]');n.addClass("active"),setTimeout(function(){n.removeClass("active")},100)},e},br.Console=function(){var e=this;return e.el={content:$("#console .content"),clear:$("#console a")},e.add=function(t){e.el.content.append(t)},e.clear=function(){e.el.content.html("")},e},br.Player=function(){var e=this;return e.el={input:$("#player input"),button:$("#player button")},e.enable=function(){e.el.input.removeAttr("disabled"),e.el.button.removeAttr("disabled")},e.disable=function(){e.el.input.attr("disabled","disabled"),e.el.button.attr("disabled","disabled")},e},$(function(){var e=new br.App});